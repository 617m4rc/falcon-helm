# TO BE USED ONLY WHEN Deploying as DaemonSet

securityContext:
  privileged: true
  allowPrivilegeEscalation: true
  runAsUser: 0
  runAsGroup: 0

# Required for socket mode
volumeMounts:
  - mountPath: /tmp
    name: tmp-volume
  - mountPath: /run/crio/crio.sock
    name: var-run
  - mountPath: /run/containers/storage
    name: storage
  - mountPath: /var/lib/containers
    name: containers
  - mountPath: /usr/bin/fuse-overlayfs
    name: fuse-overlay
  - mountPath: /etc/containers/storage.conf
    name: crio-conf

# This is a mandatory mount for daemon set.
# this is used as a tmp working space for image storage
volumes:
  - name: tmp-volume
    emptyDir:
      sizeLimit: 20Gi
  - name: var-run
    hostPath:
      path: /run/crio/crio.sock # Change It if different from default path
      type: Socket
  - name: storage
    hostPath:
      path: /run/containers/storage # Change It if different from default path
      type: Directory
  - name: containers
    hostPath:
      path: /var/lib/containers # Change It if different from default path
      type: Directory
  - name: fuse-overlay
    hostPath:
      path: /usr/bin/fuse-overlayfs # Change It if different from default path
      type: File
  - name: crio-conf
    hostPath:
      path: /etc/containers/storage.conf # Change It if different from default path
      type: File

crowdstrikeConfig:
  agentRuntime: crio
  agentRuntimeSocket: "unix:///run/crio/crio.sock"
